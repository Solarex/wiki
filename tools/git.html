<!DOCTYPE HTML>
<html>
    <head>
        <link rel="Stylesheet" type="text/css" href="../static/css/typo.css">
        <link rel="Stylesheet" type="text/css" href="../static/css/reset_typo.css">
        <link rel="Stylesheet" type="text/css" href="../static/css/tango.css">
        <link rel="Stylesheet" type="text/css" href="../static/css/style.css">
        <title>git - Wiki·Solarex</title>
        <meta name="keywords" content="android,linux,python,mac"/>
        <meta name="description" content="Solarex's personal wiki,powered by simiki.Focus on Android, Python, Linux, Mac and so on."/>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        
<script src="http://apps.bdimg.com/libs/jquery/2.1.4/jquery.js"></script>
<script language="javascript" type="text/javascript">
    var oddClick = true;
    $(document).ready(function() {
      $('#toggle-button').click(function() {
        $('#container').animate({
          width: oddClick? "100%":"60%",
        });
        $(this).text(oddClick? "窄版":"宽版");
        oddClick = !oddClick;
      });
    });
</script>

    </head>

    <body>
        <a href="https://github.com/Solarex/wiki"><img style="position: fixed; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/365986a132ccd6a44c23a9169022c0b5c890c387/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f7265645f6161303030302e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_red_aa0000.png"></a>
        <div id="container">
            
    <div id="header">
        <div id="post-nav">
            <div id="toggle-button">宽版</div>
            
            <a href="https://solarex.github.io/wiki/">Home</a> » <a href="https://solarex.github.io/wiki/#tools">tools</a> » git
            
        </div>
    </div>
    <div class="clearfix"></div>
    <h1><center>git</center></h1>
    <hr>
    <div id="content">
        <h2 id="git-config">git config</h2>
<div class="hlcode"><pre><span class="k">[user]</span>
    <span class="na">name</span> <span class="o">=</span> <span class="s">Solarex</span>
<span class="s">    email = rh.hou.work@gmail.com</span>
<span class="k">[core]</span>
    <span class="na">editor</span> <span class="o">=</span> <span class="s">vim</span>
<span class="k">[color]</span>
    <span class="na">ui</span> <span class="o">=</span> <span class="s">auto</span>
<span class="k">[alias]</span>
    <span class="na">lg</span> <span class="o">=</span> <span class="s">log --color --graph --pretty=format:&#39;%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)&lt;%an&gt;%Creset&#39; --abbrev-commit --</span>
<span class="k">[commit]</span>
    <span class="na">template</span> <span class="o">=</span> <span class="s">~/.git_commit.template</span>
</pre></div>


<h2 id="git-flow">git flow</h2>
<div class="hlcode"><pre><span class="err">远程创建一个主分支，本地每人创建功能分支，日常工作流程如下：</span>

<span class="err">去自己的工作分支</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">checkout</span> <span class="n">work</span>

<span class="err">工作</span>
<span class="p">....</span>

<span class="err">提交工作分支的修改</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">commit</span> <span class="o">-</span><span class="n">a</span>

<span class="err">回到主分支</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>

<span class="err">获取远程最新的修改，此时不会产生冲突</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">pull</span>

<span class="err">回到工作分支</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">checkout</span> <span class="n">work</span>

<span class="err">用</span><span class="n">rebase</span><span class="err">合并主干的修改，如果有冲突在此时解决</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">rebase</span> <span class="n">master</span>

<span class="err">回到主分支</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">checkout</span> <span class="n">master</span>

<span class="err">合并工作分支的修改，此时不会产生冲突。</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">merge</span> <span class="n">work</span>

<span class="err">提交到远程主干</span>
<span class="err">$</span> <span class="n">git</span> <span class="n">push</span>
</pre></div>


<h1 id="git">git 恢复备份</h1>
<div class="hlcode"><pre>git clone --mirror $(url}/{repo}
pushd <span class="cp">${</span><span class="n">repo</span><span class="cp">}</span>
git remote update
popd
</pre></div>


<h1 id="git_1">git 命令</h1>
<ul>
<li>
<p><code>git remote show origin</code>，查看远程分支</p>
</li>
<li>
<p><code>git remote prune origin</code>，删除远程已经不存在的分支，stale状态</p>
</li>
<li>
<p><code>git remote set-url origin git@192.168.6.70:res_dev_group/test.git</code> 变更项目地址</p>
</li>
<li>
<p><code>git commit --amend</code>，修改最近的一次提交</p>
</li>
<li>
<p><code>git commit --amend --reset-author</code>重置最后一次提交的author</p>
</li>
<li>
<p><code>git log --follow -p file</code>，查看文件历史版本</p>
</li>
<li>
<p><code>git cherry-pick commit-id</code>，"复制"一个提交节点并在当前分支做一次完全一样的新提交。</p>
</li>
<li>
<p><code>git clone -o meizu ssh://*****</code>,change remote origin to meizu</p>
</li>
<li>
<p><a href="https://marklodato.github.io/visual-git-guide/index-zh-cn.html">visual-git-guide</a></p>
</li>
<li>
<p><code>git config --global diff.external /path/to/meld.sh</code></p>
</li>
</ul>
<div class="hlcode"><pre><span class="c">#!/bin/bash</span>
meld <span class="s2">&quot;$2&quot;</span> <span class="s2">&quot;$5&quot;</span> &gt;/dev/null &gt;2&amp;1
</pre></div>


<ul>
<li><code>git config --global diff.external /path/to/opendiff.sh</code>,<code>git config --global --unset diff.external</code></li>
</ul>
<div class="hlcode"><pre><span class="c">#!/bin/bash</span>
/usr/bin/opendiff <span class="s2">&quot;$2&quot;</span> <span class="s2">&quot;$5&quot;</span> -merge <span class="s2">&quot;$1&quot;</span>
</pre></div>


<ul>
<li>‘matching’参数是 Git 1.x 的默认行为，其意是如果你执行 git push 但没有指定分支，它将 push 所有你本地的分支到远程仓库中对应匹配的分支。而 Git 2.x 默认的是 simple，意味着执行 git push 没有指定分支时，只有当前分支会被 push 到你使用 git pull 获取的代码。</li>
</ul>
<div class="hlcode"><pre>git config --global push.default matching
</pre></div>


<ul>
<li>
<p><code>git submodule add 仓库地址 路径</code>仓库地址是指子模块仓库地址，路径指将子模块放置在当前工程下的路径。路径不能以 / 结尾（会造成修改不生效）、不能是现有工程已有的目录（不能順利 Clone）
命令执行完成，会在当前工程根路径下生成一个名为“.gitmodules”的文件，其中记录了子模块的信息。添加完成以后，再将子模块所在的文件夹添加到工程中即可。</p>
</li>
<li>
<p>submodule的删除稍微麻烦点：首先，要在“.gitmodules”文件中删除相应配置信息。然后，执行git rm –cached命令将子模块所在的文件从git中删除。下载的工程带有submodule当使用git clone下来的工程中带有submodule时，初始的时候，submodule的内容并不会自动下载下来的，此时，只需执行如下命令：</p>
</li>
</ul>
<div class="hlcode"><pre>git submodule update --init --recursive
</pre></div>
    </div>

        </div>
        <div id="footer">
              <p>
                Copyright © 2012-2016 Solarex.
                Powered by <a href="http://simiki.org/" target="_blank">Simiki</a>.
              </p>
                <p>Last Update 2016-05-25 16:32:32</p>
        </div>
    </body>
</html>